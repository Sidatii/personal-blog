---
phase: 05-admin-panel-and-auth
plan: 02
type: execute
wave: 1
depends_on: ["05-01"]
files_modified:
  - resources/views/layouts/admin.blade.php
  - resources/views/components/admin-sidebar.blade.php
  - resources/views/components/admin-header.blade.php
  - app/Http/Controllers/Admin/DashboardController.php
  - resources/views/admin/dashboard/index.blade.php
autonomous: true

must_haves:
  truths:
    - "Admin dashboard accessible at /admin with overview stats"
    - "Sidebar navigation with links to all admin sections"
    - "Header shows current admin user and logout option"
    - "Layout uses Rose Pine dark theme consistent with frontend"
    - "Responsive design works on desktop and tablet"
  artifacts:
    - path: "resources/views/layouts/admin.blade.php"
      provides: "Admin layout with sidebar and header"
      contains: "sidebar, header, main content area"
    - path: "app/Http/Controllers/Admin/DashboardController.php"
      provides: "Dashboard with stats"
      exports: ["index"]
    - path: "resources/views/admin/dashboard/index.blade.php"
      provides: "Dashboard view with stats cards"
      contains: "stats, recent activity"
  key_links:
    - from: "resources/views/layouts/admin.blade.php"
      to: "resources/views/components/admin-sidebar.blade.php"
      via: "@include"
      pattern: "admin-sidebar"
    - from: "app/Http/Controllers/Admin/DashboardController.php"
      to: "app/Models/Post"
      via: "Post::count()"
      pattern: "Post::count"
---

<objective>
Create admin layout with sidebar navigation, header, and dashboard with overview statistics.

Purpose: Provide a consistent admin interface with navigation to all management sections and key metrics at a glance.

Output: Admin layout components, dashboard controller and view with stats.
</objective>

<execution_context>
@/home/human/.config/opencode/get-shit-done/workflows/execute-plan.md
@/home/human/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/phases/05-admin-panel-and-auth/05-01-SUMMARY.md

@resources/views/layouts/app.blade.php
@resources/views/components/header.blade.php
@routes/admin.php
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create admin layout components</name>
  <files>
    resources/views/layouts/admin.blade.php
    resources/views/components/admin-sidebar.blade.php
    resources/views/components/admin-header.blade.php
  </files>
  <action>
    Create admin.blade.php layout:
    - Dark Rose Pine theme (consistent with frontend)
    - Fixed sidebar on left (w-64), scrollable main content
    - Header at top of main area
    - Structure: html > body > div.flex > aside.sidebar + div.flex-1 > header + main
    - Include dark-mode.js for theme consistency
    - CSRF token meta tag
    - Vite CSS/JS inclusion

    Create admin-sidebar.blade.php component:
    - Logo/branding at top
    - Navigation links with icons:
      - Dashboard (route: admin.dashboard)
      - Posts (route: admin.posts.index)
      - Categories (route: admin.categories.index)
      - Tags (route: admin.tags.index)
      - Projects (route: admin.projects.index)
      - Contacts (route: admin.contacts.index)
    - Active state highlighting
    - Collapsible on mobile (Alpine.js)
    - Logout button at bottom

    Create admin-header.blade.php component:
    - Mobile menu toggle button
    - Current page title
    - User dropdown (name, logout link)
    - Dark mode toggle
  </action>
  <verify>
    Views compile: `php artisan view:cache`
    No syntax errors in blade files
  </verify>
  <done>
    Admin layout with sidebar, header, and main content area created
  </done>
</task>

<task type="auto">
  <name>Task 2: Create dashboard controller and view</name>
  <files>
    app/Http/Controllers/Admin/DashboardController.php
    resources/views/admin/dashboard/index.blade.php
  </files>
  <action>
    Create DashboardController:
    - index() method gathering stats:
      - Total posts count
      - Published posts count
      - Draft posts count (if applicable)
      - Total categories count
      - Total tags count
      - Total projects count
      - Unread contact submissions count
      - Recent posts (last 5)
      - Recent contact submissions (last 5)
    - Return view with compact stats

    Create dashboard/index.blade.php:
    - Extends layouts.admin
    - Stats cards grid (grid-cols-1 md:grid-cols-2 lg:grid-cols-4)
    - Each card: icon, number, label, link to section
    - Recent activity section:
      - Recent posts table (title, date, link)
      - Recent contacts table (name, subject, date, status)
    - Rose Pine styling with subtle borders and hover effects
  </action>
  <verify>
    Controller syntax: `php -l app/Http/Controllers/Admin/DashboardController.php`
    Route works: Visit /admin and see dashboard with stats
  </verify>
  <done>
    Dashboard displays real stats from database with overview cards and recent activity
  </done>
</task>

</tasks>

<verification>
- /admin shows dashboard with stats cards
- Sidebar navigation visible with all section links
- Header shows current user
- Responsive layout works (sidebar collapses on mobile)
- All links in sidebar navigate correctly
- Rose Pine dark theme consistent throughout
</verification>

<success_criteria>
- Admin layout created with sidebar and header
- Dashboard accessible at /admin showing real statistics
- Navigation links to all planned admin sections
- Responsive design functional
- Consistent Rose Pine dark theme
</success_criteria>

<output>
After completion, create `.planning/phases/05-admin-panel-and-auth/05-02-SUMMARY.md`
</output>

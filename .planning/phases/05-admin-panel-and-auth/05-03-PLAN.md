---
phase: 05-admin-panel-and-auth
plan: 04
type: execute
wave: 3
depends_on: ["05-03"]
files_modified:
  - app/Http/Controllers/Admin/ProjectController.php
  - app/Http/Controllers/Admin/ContactController.php
  - resources/views/admin/projects/index.blade.php
  - resources/views/admin/projects/create.blade.php
  - resources/views/admin/projects/edit.blade.php
  - resources/views/admin/contacts/index.blade.php
  - resources/views/admin/contacts/show.blade.php
  - routes/admin.php
autonomous: true

must_haves:
  truths:
    - "Admin can manage projects (CRUD)"
    - "Admin can view contact submissions"
    - "Admin can mark contacts as read/unread"
    - "Admin can delete contact submissions"
    - "Project status can be changed via admin"
  artifacts:
    - path: "app/Http/Controllers/Admin/ProjectController.php"
      provides: "Project CRUD operations"
      exports: ["index", "create", "store", "edit", "update", "destroy"]
    - path: "app/Http/Controllers/Admin/ContactController.php"
      provides: "Contact submission management"
      exports: ["index", "show", "markAsRead", "destroy"]
    - path: "resources/views/admin/projects/index.blade.php"
      provides: "Projects list with status filters"
      contains: "status badges, action buttons"
  key_links:
    - from: "app/Http/Controllers/Admin/ContactController.php"
      to: "app/Models/ContactSubmission"
      via: "ContactSubmission::findOrFail"
      pattern: "ContactSubmission::"
---

<objective>
Implement project management and contact submission handling in admin panel.

Purpose: Allow admin to manage portfolio projects and view/respond to contact form submissions.

Output: Controllers and views for projects CRUD and contacts management.
</objective>

<execution_context>
@/home/human/.config/opencode/get-shit-done/workflows/execute-plan.md
@/home/human/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/phases/05-admin-panel-and-auth/05-03-SUMMARY.md

@app/Models/Project.php
@app/Models/ContactSubmission.php
@routes/admin.php
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Project CRUD controller and views</name>
  <files>
    app/Http/Controllers/Admin/ProjectController.php
    resources/views/admin/projects/index.blade.php
    resources/views/admin/projects/create.blade.php
    resources/views/admin/projects/edit.blade.php
  </files>
  <action>
    Create ProjectController:
    - index(): Paginated projects with status filter support
    - create(): Show form with status options (active, completed, in-progress, archived)
    - store(ProjectRequest $request): Create project with all fields
    - edit(Project $project): Show edit form
    - update(ProjectRequest $request, Project $project): Update project
    - destroy(Project $project): Delete with confirmation

    Form validation:
    - title (required, max:255)
    - slug (required, unique)
    - short_description (required, max:500)
    - description (nullable)
    - tech_stack (nullable, array)
    - status (required, in:active,completed,in-progress,archived)
    - is_featured (boolean)
    - live_url (nullable, url)
    - github_url (nullable, url)

    Views:
    - index: Table with thumbnail, title, status badge, actions, status filter dropdown
    - create/edit: Form with all fields, tech stack as tag input, status select
  </action>
  <verify>
    Routes: `php artisan route:list --path=admin/projects`
    Can create project with all statuses
    Status filter works on index
  </verify>
  <done>
    Project CRUD complete with status management
  </done>
</task>

<task type="auto">
  <name>Task 2: Create Contact submission controller and views</name>
  <files>
    app/Http/Controllers/Admin/ContactController.php
    resources/views/admin/contacts/index.blade.php
    resources/views/admin/contacts/show.blade.php
  </files>
  <action>
    Create ContactController:
    - index(): List submissions with read/unread filter, sorted by newest first
    - show(ContactSubmission $contact): Display full message with metadata
    - markAsRead(ContactSubmission $contact): Toggle is_read status
    - destroy(ContactSubmission $contact): Delete submission

    Views:
    - index.blade.php:
      - Filter buttons: All, Unread, Read
      - Table with name, email, subject preview, date, status badge
      - Quick actions: View, Mark Read/Unread, Delete
      - Pagination
    - show.blade.php:
      - Full message display
      - Sender info with email link
      - IP address and user agent (technical details)
      - Received date
      - Actions: Mark as read/unread, Delete, Back to list

    Note: No edit/create for contacts - they're read-only submissions
  </action>
  <verify>
    Routes: `php artisan route:list --path=admin/contacts`
    Can view submission details
    Can toggle read status
  </verify>
  <done>
    Contact submission management functional
  </done>
</task>

</tasks>

<verification>
- /admin/projects shows projects with status filters
- Can create new project with all fields including status
- Can edit project and change status
- /admin/contacts shows submissions
- Can filter by read/unread status
- Can view full submission details
- Can mark as read/unread
- Can delete submissions
</verification>

<success_criteria>
- Project CRUD with status management
- Contact submission viewer with read/unread tracking
- Contact metadata visible (IP, user agent)
- All operations have confirmation where appropriate
- Routes protected by admin middleware
</success_criteria>

<output>
After completion, create `.planning/phases/05-admin-panel-and-auth/05-04-SUMMARY.md`
</output>

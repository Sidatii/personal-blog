---
phase: 03-blog-features-and-seo
plan: "05"
type: execute
wave: 2
depends_on: ["03-01", "03-02"]
files_modified:
  - composer.json
  - config/seo.php
  - app/Http/Controllers/BlogController.php
  - resources/views/layouts/app.blade.php
  - app/View/Components/SeoMeta.php
  - resources/views/components/seo-meta.blade.php
autonomous: true

must_haves:
  truths:
    - "All pages have basic meta tags (title, description)"
    - "Blog posts have Open Graph and Twitter Card meta tags"
    - "JSON-LD structured data for blog posts"
    - "Hybrid OG image generation (featured or auto-generated fallback)"
  artifacts:
    - path: "config/seo.php"
      provides: "SEO configuration with defaults and settings"
      min_lines: 20
    - path: "app/Http/Controllers/BlogController.php"
      provides: "SEO data injection for index and show pages"
      min_lines: 15
    - path: "resources/views/layouts/app.blade.php"
      provides: "SEO meta tags in head section"
      min_lines: 15
    - path: "app/View/Components/SeoMeta.php"
      provides: "SEO meta component for dynamic meta tags"
      min_lines: 25
    - path: "resources/views/components/seo-meta.blade.php"
      provides: "Blade component rendering meta tags"
      min_lines: 20
  key_links:
    - from: "app/Http/Controllers/BlogController.php"
      to: "resources/views/layouts/app.blade.php"
      via: "$seo variable or view composer"
      pattern: "seo.*title"
    - from: "resources/views/layouts/app.blade.php"
      to: "app/View/Components/SeoMeta.php"
      via: "<x-seo-meta /> component"
      pattern: "x-seo-meta"
    - from: "resources/views/layouts/app.blade.php"
      to: "JSON-LD"
      via: "<script type=\"application/ld+json\">"
      pattern: "application/ld\\+json"
---

<objective>
Implement full SEO meta tag system including basic meta, Open Graph, Twitter Cards, and JSON-LD structured data for blog posts with hybrid OG image support.

Purpose: Enable search engine indexing and social sharing optimization for all pages.

Output: Complete SEO implementation with meta tags and structured data.
</objective>

<execution_context>
@/home/human/.config/opencode/get-shit-done/workflows/execute-plan.md
@/home/human/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-blog-features-and-seo/03-CONTEXT.md
@.planning/phases/03-blog-features-and-seo/03-RESEARCH.md
@.planning/phases/03-blog-features-and-seo/03-01-SUMMARY.md
@.planning/phases/03-blog-features-and-seo/03-02-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install archtechx/laravel-seo package</name>
  <files>
    composer.json, config/seo.php
  </files>
  <action>
    Run `composer require archtechx/laravel-seo` for modern SEO meta tag management.

    Publish the configuration:
    `php artisan vendor:publish --provider="Archtech\\Seo\\SeoServiceProvider"`

    Create `config/seo.php` with default values:
    - Site name and description
    - Default OG image (placeholder URL)
    - Twitter handle (if available)
    - Social links configuration

    Configure default meta tags for the site.
  </action>
  <verify>
`composer show archtechx/laravel-seo` confirms installation
`cat config/seo.php` shows configuration
  </verify>
  <done>archtechx/laravel-seo installed and configured with defaults</done>
</task>

<task type="auto">
  <name>Task 2: Create SEO meta component</name>
  <files>
    app/View/Components/SeoMeta.php, resources/views/components/seo-meta.blade.php
  </files>
  <action>
    Create `app/View/Components/SeoMeta.php`:
    - Component accepting title, description, image, type, url, publishedTime, modifiedTime, author
    - Methods to generate Open Graph tags
    - Methods to generate Twitter Card tags
    - Methods to generate JSON-LD structured data (Article schema)
    - Hybrid OG image logic: use featured image if exists, otherwise use auto-generated

    Create `resources/views/components/seo-meta.blade.php`:
    - Render all meta tags in head section
    - Include JSON-LD script tag
    - Handle escaping properly for special characters

    Reference: Use patterns from RESEARCH.md Pattern 3 and Pattern 4.
  </action>
  <verify>
`cat app/View/Components/SeoMeta.php` shows SEO component class
`cat resources/views/components/seo-meta.blade.php` shows meta rendering
  </verify>
  <done>SEO meta component created and ready for use in layouts</done>
</task>

<task type="auto">
  <name>Task 3: Update BlogController to inject SEO data</name>
  <files>
    app/Http/Controllers/BlogController.php
  </files>
  <action>
    Update `app/Http/Controllers/BlogController.php`:
    - index() method: Set SEO for blog index page (title, description, canonical URL)
    - show() method: Set SEO for individual posts with:
      - Title: post title + site name
      - Description: post excerpt or truncated content
      - Image: featured image or auto-generated OG image
      - Type: article
      - Published time, modified time
      - Author name
    - Pass SEO data to view via $seo variable or seo() helper

    The JSON-LD should include Article schema with proper @context and @type.
  </action>
  <verify>
`cat app/Http/Controllers/BlogController.php` shows SEO data injection in index and show methods
  </verify>
  <done>Blog posts have complete SEO meta tags and structured data</done>
</task>

<task type="auto">
  <name>Task 4: Update base layout to include SEO meta tags</name>
  <files>
    resources/views/layouts/app.blade.php
  </files>
  <action>
    Update `resources/views/layouts/app.blade.php`:
    - Add `<x-seo-meta />` component in `<head>` section
    - Pass page-specific data if available from $seo variable
    - Include fallback to config defaults
    - Ensure proper rendering order: title, meta description, OG, Twitter, JSON-LD

    The layout should handle both pages with SEO data (posts) and pages without (fallback to defaults).
  </action>
  <verify>
`cat resources/views/layouts/app.blade.php` shows `<x-seo-meta />` component in head
  </verify>
  <done>All pages render appropriate SEO meta tags in head section</done>
</task>

<task type="auto">
  <name>Task 5: Configure auto-generated OG image fallback</name>
  <files>
    app/View/Components/SeoMeta.php, config/seo.php
  </files>
  <action>
    In `SeoMeta.php`, implement hybrid OG image logic:
    - If post has featured image, use it
    - Otherwise, construct URL for auto-generated image (placeholder implementation)
    - Create a simple auto-generator that uses a service or local route

    Configure in `config/seo.php`:
    - Default OG image URL
    - OG image dimensions and format expectations
    - Twitter card image settings

    This provides the fallback for posts without featured images as specified in decisions.
  </action>
  <verify>
`cat config/seo.php` shows OG image configuration
`cat app/View/Components/SeoMeta.php` shows image selection logic
  </verify>
  <done>Hybrid OG image works: featured image when available, fallback otherwise</done>
</task>

</tasks>

<verification>
- Inspect page source on blog index, verify meta tags present
- Inspect page source on blog post, verify OG tags, Twitter cards, JSON-LD
- Use Google Rich Results Test to verify structured data
- Check social sharing preview (Facebook Debugger, Twitter Card Validator)
- Verify OG images load correctly for posts with/without featured images
</verification>

<success_criteria>
- All pages have basic meta tags
- Blog posts have complete Open Graph and Twitter Card tags
- JSON-LD Article schema validates in Rich Results Test
- Hybrid OG image logic works (featured or fallback)
- Social sharing previews display correctly
</success_criteria>

<output>
After completion, create `.planning/phases/03-blog-features-and-seo/03-05-SUMMARY.md`

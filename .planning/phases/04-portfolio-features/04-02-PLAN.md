---
phase: 04-portfolio-features
plan: 02
type: execute
wave: 2
depends_on: ["04-01"]
files_modified:
  - app/Http/Controllers/ProjectController.php
  - resources/views/projects/index.blade.php
  - resources/views/projects/show.blade.php
  - resources/views/components/project-card.blade.php
  - routes/web.php
autonomous: true

must_haves:
  truths:
    - "Visitor sees a masonry grid of project cards at /projects"
    - "Visitor can filter projects by status (active, completed, archived, in-progress)"
    - "Clicking a project card navigates to /projects/{slug} with full details"
    - "Project detail page shows description, screenshots, tech badges, and links to live site/GitHub"
  artifacts:
    - path: "app/Http/Controllers/ProjectController.php"
      provides: "Projects index and show actions"
      exports: ["ProjectController"]
    - path: "resources/views/projects/index.blade.php"
      provides: "Masonry grid with status filter"
      contains: "columns"
    - path: "resources/views/projects/show.blade.php"
      provides: "Project detail page"
      contains: "tech_stack"
    - path: "resources/views/components/project-card.blade.php"
      provides: "Individual project card component"
      contains: "status"
  key_links:
    - from: "app/Http/Controllers/ProjectController.php"
      to: "app/Repositories/Contracts/ProjectRepositoryInterface.php"
      via: "constructor injection"
      pattern: "ProjectRepositoryInterface"
    - from: "resources/views/projects/index.blade.php"
      to: "resources/views/components/project-card.blade.php"
      via: "Blade include"
      pattern: "project-card"
    - from: "routes/web.php"
      to: "app/Http/Controllers/ProjectController.php"
      via: "route registration"
      pattern: "ProjectController"
---

<objective>
Build the projects showcase with masonry grid index page and project detail page.

Purpose: Let visitors browse portfolio projects in a visually dynamic Pinterest-style layout, filter by status, and view full project details with tech stack badges, screenshots, and external links.

Output: ProjectController with index/show actions, masonry grid index view with status filter, project detail view, and project card component.
</objective>

<execution_context>
@/home/human/.claude/get-shit-done/workflows/execute-plan.md
@/home/human/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/04-portfolio-features/04-CONTEXT.md
@.planning/phases/04-portfolio-features/04-01-SUMMARY.md

@app/Http/Controllers/BlogController.php
@app/Models/Project.php
@resources/views/layouts/app.blade.php
@resources/views/posts/index.blade.php
@resources/css/app.css
@routes/web.php
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create ProjectController with index and show actions</name>
  <files>
    app/Http/Controllers/ProjectController.php
    routes/web.php
  </files>
  <action>
    Create ProjectController following the BlogController pattern:

    - Inject ProjectRepositoryInterface via constructor (not manual instantiation).
    - index(Request $request): View
      - Accept optional `?status=` query parameter for filtering
      - If status param provided and valid (active/completed/archived/in-progress), use repository->getByStatus($status)
      - Otherwise use repository->all()
      - Pass $projects, $currentStatus (string|null), and $statuses (array of available status values) to view
      - Include SEO data: title "Projects", description "Browse my portfolio of projects..."
    - show(Request $request, string $slug): View
      - Use repository->findBySlug($slug), abort 404 if not found
      - Include SEO data with project title and short_description
      - Pass $project to view

    Add routes to web.php (AFTER the blog routes, BEFORE feed routes):
    - GET /projects -> ProjectController@index, name 'projects.index'
    - GET /projects/{slug} -> ProjectController@show, name 'projects.show'

    Do NOT modify existing blog routes. Add the project routes in a new "Portfolio Routes" comment block.
  </action>
  <verify>
    Run `php artisan route:list --name=projects` to confirm both routes registered.
    Run `php artisan tinker --execute="app(\App\Http\Controllers\ProjectController::class);"` to confirm controller resolves.
  </verify>
  <done>
    ProjectController has index and show actions with repository injection.
    Routes /projects and /projects/{slug} are registered and named.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create masonry grid index view and project card component</name>
  <files>
    resources/views/projects/index.blade.php
    resources/views/projects/show.blade.php
    resources/views/components/project-card.blade.php
  </files>
  <action>
    Create project-card.blade.php component:
    - Accept $project prop
    - Card with Rose Pine styling: bg-rose-pine-surface, border border-rose-pine-overlay, rounded-lg, overflow-hidden
    - If thumbnail exists, show image at top with aspect-auto (varied heights for masonry effect)
    - Title (text-lg font-semibold text-rose-pine-text)
    - Short description (text-sm text-rose-pine-subtle, line-clamp-3)
    - Status badge: small pill with color based on status:
      - active: bg-rose-pine-foam/20 text-rose-pine-foam
      - completed: bg-rose-pine-iris/20 text-rose-pine-iris
      - in-progress: bg-rose-pine-gold/20 text-rose-pine-gold
      - archived: bg-rose-pine-muted/20 text-rose-pine-muted
    - Tech stack badges: flex-wrap row of small pills (bg-rose-pine-overlay text-rose-pine-subtle text-xs px-2 py-0.5 rounded)
    - Entire card is wrapped in anchor tag linking to projects.show route
    - Hover effect: ring-1 ring-rose-pine-iris/50 transition

    Create projects/index.blade.php:
    - Extends layouts.app
    - Page header: "Projects" title with subtitle
    - Status filter bar using Alpine.js:
      - Horizontal row of filter buttons: All, Active, Completed, In Progress, Archived
      - Current filter highlighted (bg-rose-pine-iris text-rose-pine-base)
      - Inactive filters: bg-rose-pine-surface text-rose-pine-subtle hover:text-rose-pine-text
      - Clicking a filter navigates to ?status={value} (or removes param for "All") using standard links, not JS filtering
    - Masonry grid using CSS columns (NOT a JS masonry library):
      - `columns-1 sm:columns-2 lg:columns-3 gap-6 space-y-6`
      - Each card uses `break-inside-avoid` for proper masonry behavior
      - This creates a Pinterest-style layout with CSS alone
    - Empty state if no projects: "No projects to display" with muted text
    - Include SEO meta via the $seo variable passed from controller

    Create projects/show.blade.php:
    - Extends layouts.app
    - Back link to /projects at top
    - Project title (text-3xl font-bold)
    - Status badge (same styling as card)
    - Full description rendered as prose (prose class for typography)
    - Tech stack section: "Built With" heading, then categorized badges (larger than card badges, with Rose Pine colors)
    - Screenshots section (if screenshots exist): responsive grid of images
    - Links section: buttons for Live Site and GitHub (if urls exist)
      - Live Site: bg-rose-pine-iris text-rose-pine-base px-4 py-2 rounded
      - GitHub: border border-rose-pine-iris text-rose-pine-iris px-4 py-2 rounded
    - Include SEO meta

    All views must use the existing Rose Pine color scheme (rose-pine-base, rose-pine-surface, rose-pine-overlay, etc.) and follow the same Tailwind patterns as the blog views.
  </action>
  <verify>
    Start dev server with `php artisan serve` and `npm run dev` in background.
    Visit http://localhost:8000/projects - page loads without errors (may be empty if no seed data).
    Check page source for correct HTML structure (CSS columns, filter bar).
    Run `php artisan view:cache` to confirm all Blade templates compile without syntax errors, then `php artisan view:clear`.
  </verify>
  <done>
    /projects shows masonry grid layout with CSS columns and status filter bar.
    /projects/{slug} shows full project detail page with tech badges, screenshots section, and external links.
    Project cards display title, short description, status badge, and tech stack pills.
    All views use Rose Pine theme colors consistently.
  </done>
</task>

</tasks>

<verification>
- `php artisan route:list --name=projects` shows both routes
- `php artisan view:cache` compiles all views without errors
- /projects page renders with masonry CSS columns layout
- /projects/{slug} page renders with project details
- Status filter links generate correct URLs
</verification>

<success_criteria>
- ProjectController uses repository injection (not direct model queries)
- Masonry layout uses CSS columns (columns-1 sm:columns-2 lg:columns-3), not a JS library
- Status filter works via query parameter (?status=active)
- Project detail page shows tech_stack as badges, external links as buttons
- All views extend layouts.app and include SEO data
</success_criteria>

<output>
After completion, create `.planning/phases/04-portfolio-features/04-02-SUMMARY.md`
</output>
